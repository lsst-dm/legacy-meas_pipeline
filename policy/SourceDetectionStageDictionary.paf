#<?cfg paf dictionary ?>
#
# Dictionary for SourceDetectionStage policies
#
target: lsst.detection.pipeline.SourceDetectionStage

definitions: {
    #input clipboard keys
    inputKeys: {
        type: "policy"
        dictionary: {
            definitions: {
                exposure: {
                    type: "string"
                    description: "specify the clipboard key(s) of the exposure(s) 
                    to detect on."
                    minOccurs: 1
                }    	
                psf : {
                    type: "string"
                    description: "input clipboard key for a smoothing Psf"
                    minOccurs: 0
                    maxOccurs: 1
                }
            }
        }
        maxOccurs: 1		
    }
    
    #output clipboard keys:
    outputKeys: {
    	type: "policy"
    	dictionary: {
            definitions: {
                positiveDetection: {
                    type: "string"
                    description: "specify the clipboard key of the positive FootprintSet"
                    maxOccurs: 1
                    default: "positiveFootprintSet"
                }
                negativeDetection: {
                    type: "string"
                    description: "specify the clipboard key of the negative FootprintSet"
                    maxOccurs: 1
                    default: "negativeFootprintSet"
                }
                psf: {
                    type: "string"
                    description: "specify the output key for the psf used"
                    maxOccurs: 1
                    default: "psf"
                }    
                backgroundSubtractedExposure: {
                    type: "string"
                    description: "specify output clipboard key of the background-subtracted 
                    			  exposure on which detection was performed"
                    maxOccurs: 1
                    default: "backgroundSubtractedExposure"
                }
                background: {
                	type: "string"
                	description: "output clipboard key for computed background object"
                	maxOccurs: 1
                	default: "background"
                }
            }
        }
        maxOccurs: 1
    }

    
    #parameters    
    backgroundPolicy: {
        type: "policy"
        dictionary: @@meas_utils:policy/BackgroundDictionary.paf
        description: "includes all the parameters needed to estimate an exposure's background"
        minOccurs: 0 
        maxOccurs: 1
    }
    psfPolicy: {
        type: "policy"
        dictionary: @@meas_utils:policy/PsfDictionary.paf
        description: "includes all the parameters needed to create a PSF"
        minOccurs: 0 
        maxOccurs: 1
    }
    detectionPolicy: {
        type: "policy"
        dictionary: @@meas_utils:policy/DetectionDictionary.paf
        description: "includes all the parameters needed to perform source
                      detection on an exposure"
        minOccurs: 1 
        maxOccurs: 1
    }
}
