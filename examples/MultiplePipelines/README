
meas_pipeline examples/MultiplePipelines
----------------------------------------------

This example illustrates how to run the deep detection pipeline as two 
distinct pipelines with different data-parallelism.

The first pipeline is responsible for generating a coadd and generating a 
list of detections in that coadd. It then persists this list to DB storage, and
triggers the second pipeline via an event. This pipeline operates on only 1 node
with 1 worker, and gains no benefit from more.

The second pipeline retrieves the detection list from storage and then performs
multifit. This pipeline benefits from having as many nodes as are available. 
Each slice will work on a fraction of the detection list. The more slices, the
smaller the fraction of detections each slice has to work on.

This example uses just one nodelist file for simplicity, but the pipelines need
not run on the same nodes.

To run this example run:
% ./run.sh <coadd-policy> <runId> false

and in a seperate shell:
% ./run.sh <multifit-policy> <runId>

The pipelines must be run in this order. Both pipelines will block waiting for their respective events. To trigger execution, supply an event by running the script:

% python triggerCoaddEventTransmitter.py
